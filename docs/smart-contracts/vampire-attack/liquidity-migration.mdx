---
id: liquidity-migration
title: Liquidity Migration
sidebar_position: 1
custom_edit_url: https://github.com/EnsoFinance/enso-docs/blob/main/docs/smart-contracts/vampire-attack/liquidity-migration.mdx
---

import Tabs from '@theme/Tabs'
import TabItem from '@theme/TabItem'

##### Liquidity Migration Contracts for Enso Vampire Attack

---

## ENSO Liquidity Migration Contracts

Refer to [Vampire attack guide](../../guides/vampire-attack.mdx) prior to reading this documentation, and our ![medium article](https://medium.com/ensofinance/vampire-attack-6-protocols-8d1a1454ec3f).

Indicies are staked in the `LiquidityMigration` contract, which updates staked value for each staker.  Stake cannot be undone, and indicies will be unwrapped when migration occurs.  Migration can only occur by calling `migrate()` from the Enso Multisig.  In emergecy cases, Enso Multisig has right to call `refund()` only a particular stakers index which transfers the staked amount directly back to the stakers wallet. 


##### Liquidity Migration

- Approval of indicies into this contract, and then stake funds 
- Stake cannot be undone
- Emergency refund for staker direct address and amount
- Underlying values determined through adapter contracts
- buyAndStake best route on univ2/v3 and sushiv2 to purchase indici and stake
- Timelock for when migration ends


##### Open source

Contract source code can be found in [Github repository](https://github.com/EnsoFinance/liquidity-migration).

![have a look at the architecture](https://raw.githubusercontent.com/EnsoFinance/liquidity-migration/master/architecture/liquidityMigrationArchitecture.png)


### Contract Addresses

| **Contract** | **Network**    | **Address**                                |
| ------------ | -------------- | ------------------------------------------ |
| LiquidityMigrationV1        | Eth Mainnet    | 0x0092DECCA5E2f26466289011ad41465763BeA4cE |
| LiquidityMigrationV2        | Eth Mainnet    | 0x0c6D898ac945E493D25751Ea43BE2c8Beb881D8C |
| MigrationAdapter            | Eth Mainnet    | 0xAf8d0523660A94494c56d5445e7BfE8C61802B59 |
| MigrationCoordinator        | Eth Mainnet    | 0x6CD0df59370B38261E251Bd786B2f320595005d1 |
| TokenSetAdapter             | Eth Mainnet    | 0x5F2C716D912Ce400a8A49fB87DB722e8257257A7 |
| IndexCoop                   | Eth Mainnet    | 0x9c9326C521895c78414BD3C2945e47AFC4Ef16cc |
| Indexed                     | Eth Mainnet    | 0x8F516c0FB0bcF44CFc8D42D60dAD3E4cdb35Ce26 |
| Powerpool                   | Eth Mainnet    | 0x0a883a62660328EAd442EB6c2311668ba9c12e57 |
| PieDAO                      | Eth Mainnet    | 0xe149B1f2Ef564A289dc094215835f3c8Df1695aa |